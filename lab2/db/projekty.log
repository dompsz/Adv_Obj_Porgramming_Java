/*C3*/SET SCHEMA PUBLIC
CREATE TABLE IF NOT EXISTS projekt(\u000aprojekt_id SERIAL, --SERIAL lub INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)\u000anazwa VARCHAR(50) NOT NULL,\u000aopis VARCHAR(1000),\u000adataczas_utworzenia TIMESTAMP DEFAULT now(),\u000adata_oddania DATE,\u000aCONSTRAINT projekt_pk PRIMARY KEY (projekt_id)\u000a)
CREATE TABLE IF NOT EXISTS zadanie(\u000azadanie_id SERIAL, --SERIAL lub INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)\u000anazwa VARCHAR(50) NOT NULL,\u000aopis VARCHAR(1000),\u000akolejnosc INTEGER,\u000adataczas_utworzenia TIMESTAMP DEFAULT now(),\u000aprojekt_id INTEGER NOT NULL,\u000aCONSTRAINT zadanie_pk PRIMARY KEY (zadanie_id)\u000a)
CREATE INDEX IF NOT EXISTS projekt_nazwa_idx ON projekt(nazwa)
CREATE INDEX IF NOT EXISTS zadanie_nazwa_idx ON zadanie(nazwa)
ALTER TABLE zadanie ADD CONSTRAINT IF NOT EXISTS zadanie_projekt_fk FOREIGN KEY (projekt_id)\u000aREFERENCES projekt (projekt_id) ON DELETE CASCADE
ALTER TABLE zadanie ADD CONSTRAINT IF NOT EXISTS unique_kolejnosc UNIQUE (kolejnosc, projekt_id)
